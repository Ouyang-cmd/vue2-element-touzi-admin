{"remainingRequest":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\src\\store\\modules\\user.js","mtime":1677382302056},{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\babel.config.js","mtime":1677382256176},{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport * as mUtils from '@/utils/mUtils';\nimport { logout, getUserInfo } from '@/api/user'; // 导入用户信息相关接口\nimport { getToken, setToken, removeToken } from '@/utils/auth';\nvar user = {\n  state: {\n    name: '',\n    avatar: '',\n    token: getToken('Token'),\n    roles: [],\n    browserHeaderTitle: mUtils.getStore('browserHeaderTitle') || '小爱Admin'\n  },\n  getters: {\n    token: function token(state) {\n      return state.token;\n    },\n    roles: function roles(state) {\n      return state.roles;\n    },\n    avatar: function avatar(state) {\n      return state.avatar;\n    },\n    name: function name(state) {\n      return state.name;\n    },\n    browserHeaderTitle: function browserHeaderTitle(state) {\n      return state.browserHeaderTitle;\n    }\n  },\n  mutations: {\n    SET_ROLES: function SET_ROLES(state, roles) {\n      state.roles = roles;\n    },\n    SET_BROWSERHEADERTITLE: function SET_BROWSERHEADERTITLE(state, action) {\n      state.browserHeaderTitle = action.browserHeaderTitle;\n    },\n    SET_NAME: function SET_NAME(state, name) {\n      state.name = name;\n    },\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    }\n  },\n  actions: {\n    //登出\n    LogOut: function LogOut(_ref) {\n      var commit = _ref.commit,\n        reqData = _ref.reqData;\n      return new Promise(function (resolve, reject) {\n        logout(reqData).then(function (response) {\n          commit('SET_ROLES', []);\n          removeToken('Token');\n          resolve();\n        });\n      });\n    },\n    // 动态修改权限;本实例中,role和token是相同的;\n    ChangeRoles: function ChangeRoles(_ref2, role) {\n      var commit = _ref2.commit;\n      return new Promise(function (resolve) {\n        var token = role;\n        setToken(\"Token\", token);\n        getUserInfo({\n          \"token\": token\n        }).then(function (res) {\n          var data = res.data.userList;\n          commit('SET_ROLES', data.roles);\n          commit('SET_NAME', data.name);\n          commit('SET_AVATAR', data.avatar);\n          resolve();\n        });\n      });\n    }\n  }\n};\nexport default user;\n\n/**\r\n * 1、用户退出,需要调取后台接口吗？后台具体的业务逻辑是什么？\r\n * \r\n * \r\n */",{"version":3,"names":["mUtils","logout","getUserInfo","getToken","setToken","removeToken","user","state","name","avatar","token","roles","browserHeaderTitle","getStore","getters","mutations","SET_ROLES","SET_BROWSERHEADERTITLE","action","SET_NAME","SET_AVATAR","actions","LogOut","_ref","commit","reqData","Promise","resolve","reject","then","response","ChangeRoles","_ref2","role","res","data","userList"],"sources":["C:/Users/ou943/Desktop/pro-vue/vue2-element-touzi-admin/src/store/modules/user.js"],"sourcesContent":["\r\nimport * as mUtils from '@/utils/mUtils'\r\nimport { logout ,getUserInfo } from '@/api/user'  // 导入用户信息相关接口\r\nimport { getToken, setToken, removeToken } from '@/utils/auth'\r\n\r\n\r\nconst user  = {\r\n  state : {\r\n    name:'',\r\n    avatar:'',\r\n    token: getToken('Token'),\r\n    roles: [],\r\n    browserHeaderTitle: mUtils.getStore('browserHeaderTitle') || '小爱Admin'\r\n  },\r\n  getters : {\r\n    token: state => state.token,\r\n    roles: state => state.roles,\r\n    avatar: state => state.avatar,\r\n    name: state => state.name,\r\n    browserHeaderTitle: state => state.browserHeaderTitle,\r\n  },\r\n  mutations: {\r\n    SET_ROLES: (state, roles) => {\r\n        state.roles = roles\r\n    },\r\n    SET_BROWSERHEADERTITLE: (state, action) => {\r\n        state.browserHeaderTitle = action.browserHeaderTitle\r\n    },\r\n    SET_NAME: (state, name) => {\r\n      state.name = name\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n      state.avatar = avatar\r\n    }\r\n  },\r\n  actions:{\r\n      //登出\r\n      LogOut({ commit, reqData }) {\r\n        return new Promise((resolve, reject) => {\r\n          logout(reqData).then(response => {\r\n            commit('SET_ROLES', [])\r\n            removeToken('Token')\r\n            resolve()\r\n          })\r\n        })\r\n      },\r\n      // 动态修改权限;本实例中,role和token是相同的;\r\n      ChangeRoles({ commit }, role) {\r\n        return new Promise(resolve => {\r\n          const token = role;\r\n          setToken(\"Token\",token)\r\n          getUserInfo({\"token\":token}).then(res => {\r\n            let data = res.data.userList;\r\n            commit('SET_ROLES', data.roles)\r\n            commit('SET_NAME', data.name)\r\n            commit('SET_AVATAR', data.avatar)\r\n            resolve()\r\n          })\r\n        })\r\n      },\r\n      \r\n  }\r\n}\r\n\r\nexport default user;\r\n\r\n/**\r\n * 1、用户退出,需要调取后台接口吗？后台具体的业务逻辑是什么？\r\n * \r\n * \r\n */"],"mappings":";AACA,OAAO,KAAKA,MAAM,MAAM,gBAAgB;AACxC,SAASC,MAAM,EAAEC,WAAW,QAAQ,YAAY,EAAE;AAClD,SAASC,QAAQ,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,cAAc;AAG9D,IAAMC,IAAI,GAAI;EACZC,KAAK,EAAG;IACNC,IAAI,EAAC,EAAE;IACPC,MAAM,EAAC,EAAE;IACTC,KAAK,EAAEP,QAAQ,CAAC,OAAO,CAAC;IACxBQ,KAAK,EAAE,EAAE;IACTC,kBAAkB,EAAEZ,MAAM,CAACa,QAAQ,CAAC,oBAAoB,CAAC,IAAI;EAC/D,CAAC;EACDC,OAAO,EAAG;IACRJ,KAAK,EAAE,SAAAA,MAAAH,KAAK;MAAA,OAAIA,KAAK,CAACG,KAAK;IAAA;IAC3BC,KAAK,EAAE,SAAAA,MAAAJ,KAAK;MAAA,OAAIA,KAAK,CAACI,KAAK;IAAA;IAC3BF,MAAM,EAAE,SAAAA,OAAAF,KAAK;MAAA,OAAIA,KAAK,CAACE,MAAM;IAAA;IAC7BD,IAAI,EAAE,SAAAA,KAAAD,KAAK;MAAA,OAAIA,KAAK,CAACC,IAAI;IAAA;IACzBI,kBAAkB,EAAE,SAAAA,mBAAAL,KAAK;MAAA,OAAIA,KAAK,CAACK,kBAAkB;IAAA;EACvD,CAAC;EACDG,SAAS,EAAE;IACTC,SAAS,EAAE,SAAAA,UAACT,KAAK,EAAEI,KAAK,EAAK;MACzBJ,KAAK,CAACI,KAAK,GAAGA,KAAK;IACvB,CAAC;IACDM,sBAAsB,EAAE,SAAAA,uBAACV,KAAK,EAAEW,MAAM,EAAK;MACvCX,KAAK,CAACK,kBAAkB,GAAGM,MAAM,CAACN,kBAAkB;IACxD,CAAC;IACDO,QAAQ,EAAE,SAAAA,SAACZ,KAAK,EAAEC,IAAI,EAAK;MACzBD,KAAK,CAACC,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDY,UAAU,EAAE,SAAAA,WAACb,KAAK,EAAEE,MAAM,EAAK;MAC7BF,KAAK,CAACE,MAAM,GAAGA,MAAM;IACvB;EACF,CAAC;EACDY,OAAO,EAAC;IACJ;IACAC,MAAM,WAAAA,OAAAC,IAAA,EAAsB;MAAA,IAAnBC,MAAM,GAAAD,IAAA,CAANC,MAAM;QAAEC,OAAO,GAAAF,IAAA,CAAPE,OAAO;MACtB,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;QACtC3B,MAAM,CAACwB,OAAO,CAAC,CAACI,IAAI,CAAC,UAAAC,QAAQ,EAAI;UAC/BN,MAAM,CAAC,WAAW,EAAE,EAAE,CAAC;UACvBnB,WAAW,CAAC,OAAO,CAAC;UACpBsB,OAAO,EAAE;QACX,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IACD;IACAI,WAAW,WAAAA,YAAAC,KAAA,EAAaC,IAAI,EAAE;MAAA,IAAhBT,MAAM,GAAAQ,KAAA,CAANR,MAAM;MAClB,OAAO,IAAIE,OAAO,CAAC,UAAAC,OAAO,EAAI;QAC5B,IAAMjB,KAAK,GAAGuB,IAAI;QAClB7B,QAAQ,CAAC,OAAO,EAACM,KAAK,CAAC;QACvBR,WAAW,CAAC;UAAC,OAAO,EAACQ;QAAK,CAAC,CAAC,CAACmB,IAAI,CAAC,UAAAK,GAAG,EAAI;UACvC,IAAIC,IAAI,GAAGD,GAAG,CAACC,IAAI,CAACC,QAAQ;UAC5BZ,MAAM,CAAC,WAAW,EAAEW,IAAI,CAACxB,KAAK,CAAC;UAC/Ba,MAAM,CAAC,UAAU,EAAEW,IAAI,CAAC3B,IAAI,CAAC;UAC7BgB,MAAM,CAAC,YAAY,EAAEW,IAAI,CAAC1B,MAAM,CAAC;UACjCkB,OAAO,EAAE;QACX,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EAEJ;AACF,CAAC;AAED,eAAerB,IAAI;;AAEnB;AACA;AACA;AACA;AACA"}]}