{"remainingRequest":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\src\\page\\fundList\\fundList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\src\\page\\fundList\\fundList.vue","mtime":1677382302014},{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ou943\\Desktop\\pro-vue\\vue2-element-touzi-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n    import { mapGetters } from \"vuex\";\r\n    import * as mutils from '@/utils/mUtils'\r\n    import SearchItem from \"./components/searchItem\";\r\n    import AddFundDialog from \"./components/addFundDialog\";\r\n    import Pagination from \"@/components/pagination\";\r\n    import { getMoneyIncomePay , removeMoney, batchremoveMoney } from \"@/api/money\";\r\n\r\n    export default {\r\n        data(){\r\n            return {\r\n                tableData: [],\r\n                tableHeight:0,\r\n                loading:true,\r\n                idFlag:false,\r\n                isShow:false, // 是否显示资金modal,默认为false\r\n                editid:'',\r\n                rowIds:[],\r\n                sortnum:0,\r\n                format_type_list: {\r\n                    0: '提现',\r\n                    1: '提现手续费',\r\n                    2: '提现锁定',\r\n                    3: '理财服务退出',\r\n                    4: '购买宜定盈',\r\n                    5: '充值',\r\n                    6: '优惠券',\r\n                    7: '充值礼券',\r\n                    8: '转账'\r\n                },\r\n                addFundDialog:{  \r\n                    show:false,\r\n                    dialogRow:{}\r\n                },\r\n                incomePayData:{\r\n                    page:1,\r\n                    limit:20,\r\n                    name:''\r\n                },\r\n                pageTotal:0,\r\n                // 用于列表筛选\r\n                fields: {\r\n                    incomePayType:{\r\n                        filter: {\r\n                            list: [{\r\n                                text: '提现',\r\n                                value: 0\r\n                            },{\r\n                                text: '提现手续费',\r\n                                value: 1\r\n                            }, {\r\n                                text: '提现锁定',\r\n                                value: 2\r\n                            }, {\r\n                                text: '理财服务退出',\r\n                                value: 3\r\n                            }, {\r\n                                text: '购买宜定盈',\r\n                                value: 4\r\n                            }, {\r\n                                text: '充值',\r\n                                value: 5\r\n                            }, {\r\n                                text: '优惠券',\r\n                                value: 6\r\n                            }, {\r\n                                text: '充值礼券',\r\n                                value: 7\r\n                            }, {\r\n                                text: '转账',\r\n                                value: 8\r\n                            }],\r\n                            multiple: true\r\n                        }\r\n                    },\r\n                },\r\n               \r\n            }\r\n        },\r\n        components:{\r\n            SearchItem,\r\n            AddFundDialog,\r\n            Pagination\r\n        },\r\n        computed:{\r\n            ...mapGetters(['search'])\r\n        },\r\n      \tmounted() {\r\n            this.getMoneyList();\r\n\t   },\r\n        methods: {\r\n            setAddress(value){\r\n\r\n            },\r\n            setTableHeight(){\r\n                this.$nextTick(() => {\r\n                   this.tableHeight =  document.body.clientHeight - 300\r\n                })\r\n            },\r\n            // 获取资金列表数据\r\n            getMoneyList(){\r\n                const para = Object.assign({},this.incomePayData,this.search);\r\n                getMoneyIncomePay(para).then(res => {\r\n                     this.loading = false;\r\n                     this.pageTotal = res.data.total\r\n                     this.tableData = res.data.moneyList\r\n                })\r\n            },\r\n            // 显示资金弹框\r\n            showAddFundDialog(val){\r\n                this.$store.commit('SET_DIALOG_TITLE', val)\r\n                this.addFundDialog.show = true;\r\n            },\r\n            hideAddFundDialog(){\r\n                this.addFundDialog.show = false;\r\n            },\r\n            // 上下分页\r\n            handleCurrentChange(val){\r\n                this.incomePayData.page = val;\r\n                this.getMoneyList()\r\n            },\r\n            // 每页显示多少条\r\n            handleSizeChange(val){\r\n                this.incomePayData.limit = val;\r\n                this.getMoneyList()\r\n            },\r\n            getPay(val){\r\n               if(mutils.isInteger(val)){\r\n                   return -val;\r\n               }else{\r\n                   return val;\r\n               }\r\n            },\r\n            /**\r\n            * 格式化状态\r\n            */\r\n            formatterType(item) {\r\n                const type = parseInt(item.incomePayType);\r\n                return this.format_type_list[type];\r\n            },\r\n            filterType(value, item) {\r\n                const type = parseInt(item.incomePayType);\r\n                return this.format_type_list[value] == this.format_type_list[type];\r\n            },\r\n            // 编辑操作方法\r\n            onEditMoney(row){\r\n                this.addFundDialog.dialogRow = {...row};\r\n                this.showAddFundDialog();\r\n            },\r\n            // 删除数据\r\n            onDeleteMoney(row){\r\n                this.$confirm('确认删除该记录吗?', '提示', {\r\n                    type: 'warning'\r\n                })\r\n                .then(() => {\r\n                    const para = { id: row.id }\r\n                    removeMoney(para).then(res => {\r\n                        this.$message({\r\n                            message: '删除成功',\r\n                            type: 'success'\r\n                        })\r\n                        this.getMoneyList()\r\n                    })\r\n                })\r\n                .catch(() => {})\r\n            },\r\n            onBatchDelMoney(){\r\n                this.$confirm('确认批量删除记录吗?', '提示', {\r\n                    type: 'warning'\r\n                })\r\n                .then(() => {\r\n                    const ids = this.rowIds.map(item => item.id).toString()\r\n                    const para = { ids: ids }\r\n                    batchremoveMoney(para).then(res => {\r\n                        this.$message({\r\n                            message: '批量删除成功',\r\n                            type: 'success'\r\n                        })\r\n                        this.getMoneyList()\r\n                    })\r\n                })\r\n                .catch(() => {})\r\n            },\r\n            // 当用户手动勾选数据行的 Checkbox 时触发的事件\r\n            selectTable(val, row){\r\n                this.setSearchBtn(val);\r\n            },\r\n            // 用户全选checkbox时触发该事件\r\n            selectAll(val){\r\n                 val.forEach((item) => {\r\n                     this.rowIds.push(item.id);\r\n                });\r\n                this.setSearchBtn(val);\r\n            },\r\n            setSearchBtn(val){\r\n                let isFlag = true;\r\n                if(val.length > 0){\r\n                    isFlag = false;\r\n                }else{\r\n                    isFlag = true;\r\n                }\r\n                this.$store.commit('SET_SEARCHBTN_DISABLED',isFlag);\r\n            }\r\n        },\r\n    }\r\n",null]}